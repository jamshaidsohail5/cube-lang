use java.util.hashMap
use java.util.map

define rightParserMap[T]
  function add(key as object, parser as rightParser[T]) as void = parsers.put(key, parser)

  function get(key as object) as rightParser[T] =
    if key is not null then parsers.get(key) else null

  internal
    let parsers = new map[object, rightParser[T]]
  end
end