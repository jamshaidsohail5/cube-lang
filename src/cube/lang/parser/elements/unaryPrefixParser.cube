use cube.lang.operator
use cube.lang.cst.cstTranslator
use cube.lang.cst.token
use cube.lang.parser.leftParser
use cube.lang.parser.parser
use cube.lang.cst.cstNodeType.UNARY_EXPRESSION

define unaryPrefixParser[T] as leftParser[T]
  function create(operator as operator) = me.operator = operator

  function parse(parser as parser[T], token as token) as T
    var operand as T = parser.parse(operator.precedence.value)
    var v as cstTranslator[T] = parser.translator
    v.start(UNARY_EXPRESSION, operator)
    v.accept(token)
    v.accept(operand)
    output v.value
  end

  internal
    var operator as operator
  end
end